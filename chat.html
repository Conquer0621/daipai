<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DaiP智能聊天室 - 聊天中</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="chat-body">
    <div class="chat-container">
        <!-- 顶部导航栏 -->
        <div class="chat-header">
            <div class="header-left">
                <span class="online-indicator"></span>
                <h2>DaiP聊天室</h2>
            </div>
            <div class="header-right">
                <button id="toggle-users" class="btn-icon"><i class="fas fa-users"></i></button>
                <button id="logout-button" class="btn-icon"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>
        
        <!-- 聊天内容区域 -->
        <div class="chat-main">
            <!-- 聊天消息区域 -->
            <div class="chat-messages" id="chat-messages">
                <!-- 消息将通过JavaScript动态添加 -->
                <div class="system-message">正在连接到服务器...</div>
            </div>
            
            <!-- 在线用户侧边栏 -->
            <div class="chat-users" id="chat-users">
                <div class="users-header">
                    <h3>在线用户</h3>
                    <span class="user-count" id="user-count">0</span>
                </div>
                <ul class="users-list" id="users-list">
                    <!-- 用户列表将通过JavaScript动态添加 -->
                </ul>
            </div>
        </div>
        
        <!-- 底部输入区域 -->
        <div class="chat-footer">
            <div class="typing-indicator" id="typing-indicator"></div>
            <div class="input-group">
                <button id="emoji-button" class="btn-icon"><i class="far fa-smile"></i></button>
                <input type="text" id="message-input" placeholder="输入消息... 或使用 @xxx 命令" autocomplete="off">
                <button id="send-button" class="btn-primary">发送</button>
            </div>
            <div class="emoji-picker" id="emoji-picker">
                <!-- 常用emoji表情 -->
                <div class="emoji-list">
                    😀 😃 😄 😁 😆 😅 🤣 😂 🙂 🙃 😉 😊 😇 🥰 😍 🤩 😘 😗 😚 😙 😋 😛 😜 🤪 😝 😐 😑 😶 🙄 😏 😣 😥 😮 🤐 😯 😪 😫 😴 😌 😛 😜 😝 😒 😓 😔 😕 🙃 🤑 😲 ☹️ 🙁 😖 😞 😟 😤 😢 😭 😦 😧 😨 😩 🤯 😬 😰 😱 🥵 🥶 😳 🤪 😵 😡 😠 🤬
                </div>
            </div>
        </div>
    </div>
    
    <!-- 电影播放器模态框 -->
    <div class="modal" id="movie-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>电影播放</h3>
                <button id="close-movie" class="btn-icon"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <iframe id="movie-player" frameborder="0" allowfullscreen></iframe>
            </div>
        </div>
    </div>
    
    <script>
        // 用户信息
        const nickname = "{{ nickname }}";
        const server = "{{ server }}";
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.0/socket.io.js"></script>
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>
</html>